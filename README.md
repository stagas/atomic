<h1 align="center">atomic</h1>

<p align="center">
makes a function atomic with timeout and abort signal
</p>

<p align="center">
   <a href="#install">        ğŸ”§ <strong>Install</strong></a>
 Â· <a href="#example">        ğŸ§© <strong>Example</strong></a>
 Â· <a href="#api">            ğŸ“œ <strong>API docs</strong></a>
 Â· <a href="https://github.com/stagas/atomic/releases"> ğŸ”¥ <strong>Releases</strong></a>
 Â· <a href="#contribute">     ğŸ’ªğŸ¼ <strong>Contribute</strong></a>
 Â· <a href="https://github.com/stagas/atomic/issues">   ğŸ–ï¸ <strong>Help</strong></a>
</p>

***

## Install

```sh
$ npm i atomic
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [atomic](#atomic)
    *   [Parameters](#parameters)

### atomic

[src/index.ts:33-78](https://github.com/stagas/atomic/blob/2a0a9f5694e915eb4fe86dea4895ed398d1458c3/src/index.ts#L33-L78 "Source code on GitHub")

Makes a function atomic.

```js
const fn = atomic(signal => async () => {
  // some long async operation

  // if we've been aborted during the long
  // async process above, we wouldn't want
  // to continue so lets return here
  if (signal.aborted) return

  // do things here if we didn't abort
}, 500) // timeout at 500ms (don't pass anything for no timeout)
fn()
fn()
fn()
await fn() // this will run after the above have settled
```

#### Parameters

*   `signalClosure` **function (signal: AbortSignal): function (...args: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)\<any>): [Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<any>** A function that receives the signal object
    from an AbortController and returns the function to become atomic.
*   `maxTimeMs` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** Time in milliseconds to timeout the operation. Will also signal abort.

Returns **any** An atomic function

## Contribute

[Fork](https://github.com/stagas/atomic/fork) or
[edit](https://github.dev/stagas/atomic) and submit a PR.

All contributions are welcome!

## License

MIT Â© 2022
[stagas](https://github.com/stagas)
